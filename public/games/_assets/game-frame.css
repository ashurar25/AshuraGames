/* Shared UI/UX frame for all games */
:root {
  --gf-bg: rgba(0,0,0,0.55);
  --gf-fg: #e8f0ff;
  --gf-accent: #00ff88;
  --gf-danger: #ff4d6d;
  --gf-shadow: 0 6px 24px rgba(0,0,0,0.35);
}

/* Toolbar */
.game-toolbar {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  padding: max(8px, env(safe-area-inset-top)) 10px 8px 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  background: linear-gradient(180deg, rgba(0,0,0,0.75), rgba(0,0,0,0.35));
  color: var(--gf-fg);
  z-index: 5000;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  box-shadow: var(--gf-shadow);
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.game-toolbar .gf-left,
.game-toolbar .gf-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.game-toolbar .gf-title {
  margin-left: 6px;
  font-weight: 700;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.6);
}

.gf-btn {
  appearance: none;
  border: 0;
  border-radius: 10px;
  padding: 8px 10px;
  background: rgba(255,255,255,0.08);
  color: var(--gf-fg);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font: 600 13px/1.1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  cursor: pointer;
  transition: transform .08s ease, background .2s ease, opacity .2s ease;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.08);
}
.gf-btn:hover { background: rgba(255,255,255,0.14); }
.gf-btn:active { transform: translateY(1px) scale(0.98); }

.gf-btn--primary { box-shadow: inset 0 0 0 1px rgba(0,255,136,0.35); color: #dfffee; }
.gf-btn--danger { box-shadow: inset 0 0 0 1px rgba(255,77,109,0.35); color: #ffe6eb; }

/* Reserve top space so fixed toolbar doesn't overlap content on small screens */
body.gf-with-toolbar {
  padding-top: 56px;
}

/* Loader overlay */
.game-loader {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  background: radial-gradient(1000px 600px at 50% 20%, rgba(0,0,0,0.75), rgba(0,0,0,0.92));
  z-index: 6000;
  color: var(--gf-fg);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
}
.game-loader.is-visible { display: flex; }

.game-loader .spinner {
  width: 44px; height: 44px;
  border-radius: 50%;
  border: 4px solid rgba(255,255,255,0.18);
  border-top-color: var(--gf-accent);
  animation: gf-spin 1s linear infinite;
}

.game-loader .label { margin-top: 14px; opacity: 0.85; font-weight: 600; font-size: 13px; }

@keyframes gf-spin { from { transform: rotate(0deg);} to { transform: rotate(360deg);} }

/* Compact hint/toast (optional) */
.gf-toast {
  position: fixed;
  left: 50%; bottom: max(16px, env(safe-area-inset-bottom));
  transform: translateX(-50%);
  background: rgba(0,0,0,0.8);
  color: var(--gf-fg);
  padding: 8px 12px;
  border-radius: 10px;
  box-shadow: var(--gf-shadow);
  z-index: 7000;
  font-weight: 600;
  font-size: 12px;
}

/* Make sure on touch devices we keep controls above virtual dpad */
@media (hover: none) and (pointer: coarse) {
  .game-toolbar { padding-top: max(10px, env(safe-area-inset-top)); }
}

/* --- Mobile-safe viewport and input hygiene --- */
html, body {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  background: #000;
}

/* Fill the viewport reliably across browsers */
body {
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  /* Reserve safe-areas so UI isnâ€™t clipped on notched devices */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Prevent accidental page interactions during gameplay */
body, .game-container, canvas {
  overscroll-behavior: none;
  touch-action: none;
}

/* Ensure the main game area can cover the viewport */
.game-container, #gameContainer, .game, #game {
  position: fixed;
  inset: 0;
}

/* Cursor and rendering hints */
canvas { cursor: none; }
.gf-btn { cursor: pointer; }

/* Pixel art opt-in via attribute/class; fallback smooth elsewhere */
[data-gf-pixel-art="true"] canvas, .gf-pixel-art canvas {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* Smoother text rendering for overlays */
body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Respect user reduced-motion preference */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
  .game-loader .spinner { animation: none; }
}
